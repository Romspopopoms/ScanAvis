(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{6690:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mon-profil",function(){return __webpack_require__(9025)}])},9025:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return pages_mon_profil}});var jsx_runtime=__webpack_require__(5893),react=__webpack_require__(7294),motion=__webpack_require__(7599),use_isomorphic_effect=__webpack_require__(8868);function useIsMounted(){let isMounted=(0,react.useRef)(!1);return(0,use_isomorphic_effect.L)(()=>(isMounted.current=!0,()=>{isMounted.current=!1}),[]),isMounted}var frameloop_frame=__webpack_require__(2074),PresenceContext=__webpack_require__(240),use_constant=__webpack_require__(6681);class PopChildMeasure extends react.Component{getSnapshotBeforeUpdate(prevProps){let element=this.props.childRef.current;if(element&&prevProps.isPresent&&!this.props.isPresent){let size=this.props.sizeRef.current;size.height=element.offsetHeight||0,size.width=element.offsetWidth||0,size.top=element.offsetTop,size.left=element.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children,isPresent}){let id=(0,react.useId)(),ref=(0,react.useRef)(null),size=(0,react.useRef)({width:0,height:0,top:0,left:0});return(0,react.useInsertionEffect)(()=>{let{width,height,top,left}=size.current;if(isPresent||!ref.current||!width||!height)return;ref.current.dataset.motionPopId=id;let style=document.createElement("style");return document.head.appendChild(style),style.sheet&&style.sheet.insertRule(`
          [data-motion-pop-id="${id}"] {
            position: absolute !important;
            width: ${width}px !important;
            height: ${height}px !important;
            top: ${top}px !important;
            left: ${left}px !important;
          }
        `),()=>{document.head.removeChild(style)}},[isPresent]),react.createElement(PopChildMeasure,{isPresent:isPresent,childRef:ref,sizeRef:size},react.cloneElement(children,{ref}))}let PresenceChild=({children,initial,isPresent,onExitComplete,custom,presenceAffectsLayout,mode})=>{let presenceChildren=(0,use_constant.h)(newChildrenMap),id=(0,react.useId)(),context=(0,react.useMemo)(()=>({id,initial,isPresent,custom,onExitComplete(childId){for(let isComplete of(presenceChildren.set(childId,!0),presenceChildren.values()))if(!isComplete)return;onExitComplete&&onExitComplete()},register:childId=>(presenceChildren.set(childId,!1),()=>presenceChildren.delete(childId))}),presenceAffectsLayout?void 0:[isPresent]);return(0,react.useMemo)(()=>{presenceChildren.forEach((_,key)=>presenceChildren.set(key,!1))},[isPresent]),react.useEffect(()=>{isPresent||presenceChildren.size||!onExitComplete||onExitComplete()},[isPresent]),"popLayout"===mode&&(children=react.createElement(PopChild,{isPresent:isPresent},children)),react.createElement(PresenceContext.O.Provider,{value:context},children)};function newChildrenMap(){return new Map}var LayoutGroupContext=__webpack_require__(5364),errors=__webpack_require__(5487);let getChildKey=child=>child.key||"",AnimatePresence=({children,custom,initial=!0,onExitComplete,exitBeforeEnter,presenceAffectsLayout=!0,mode="sync"})=>{var callback;(0,errors.k)(!exitBeforeEnter,"Replace exitBeforeEnter with mode='wait'");let forceRender=(0,react.useContext)(LayoutGroupContext.p).forceRender||function(){let isMounted=useIsMounted(),[forcedRenderCount,setForcedRenderCount]=(0,react.useState)(0),forceRender=(0,react.useCallback)(()=>{isMounted.current&&setForcedRenderCount(forcedRenderCount+1)},[forcedRenderCount]),deferredForceRender=(0,react.useCallback)(()=>frameloop_frame.Wi.postRender(forceRender),[forceRender]);return[deferredForceRender,forcedRenderCount]}()[0],isMounted=useIsMounted(),filteredChildren=function(children){let filtered=[];return react.Children.forEach(children,child=>{(0,react.isValidElement)(child)&&filtered.push(child)}),filtered}(children),childrenToRender=filteredChildren,exitingChildren=(0,react.useRef)(new Map).current,presentChildren=(0,react.useRef)(childrenToRender),allChildren=(0,react.useRef)(new Map).current,isInitialRender=(0,react.useRef)(!0);if((0,use_isomorphic_effect.L)(()=>{isInitialRender.current=!1,function(children,allChildren){children.forEach(child=>{let key=getChildKey(child);allChildren.set(key,child)})}(filteredChildren,allChildren),presentChildren.current=childrenToRender}),callback=()=>{isInitialRender.current=!0,allChildren.clear(),exitingChildren.clear()},(0,react.useEffect)(()=>()=>callback(),[]),isInitialRender.current)return react.createElement(react.Fragment,null,childrenToRender.map(child=>react.createElement(PresenceChild,{key:getChildKey(child),isPresent:!0,initial:!!initial&&void 0,presenceAffectsLayout:presenceAffectsLayout,mode:mode},child)));childrenToRender=[...childrenToRender];let presentKeys=presentChildren.current.map(getChildKey),targetKeys=filteredChildren.map(getChildKey),numPresent=presentKeys.length;for(let i=0;i<numPresent;i++){let key=presentKeys[i];-1!==targetKeys.indexOf(key)||exitingChildren.has(key)||exitingChildren.set(key,void 0)}return"wait"===mode&&exitingChildren.size&&(childrenToRender=[]),exitingChildren.forEach((component,key)=>{if(-1!==targetKeys.indexOf(key))return;let child=allChildren.get(key);if(!child)return;let insertionIndex=presentKeys.indexOf(key),exitingComponent=component;if(!exitingComponent){let onExit=()=>{exitingChildren.delete(key);let leftOverKeys=Array.from(allChildren.keys()).filter(childKey=>!targetKeys.includes(childKey));if(leftOverKeys.forEach(leftOverKey=>allChildren.delete(leftOverKey)),presentChildren.current=filteredChildren.filter(presentChild=>{let presentChildKey=getChildKey(presentChild);return presentChildKey===key||leftOverKeys.includes(presentChildKey)}),!exitingChildren.size){if(!1===isMounted.current)return;forceRender(),onExitComplete&&onExitComplete()}};exitingComponent=react.createElement(PresenceChild,{key:getChildKey(child),isPresent:!1,onExitComplete:onExit,custom:custom,presenceAffectsLayout:presenceAffectsLayout,mode:mode},child),exitingChildren.set(key,exitingComponent)}childrenToRender.splice(insertionIndex,0,exitingComponent)}),childrenToRender=childrenToRender.map(child=>{let key=child.key;return exitingChildren.has(key)?child:react.createElement(PresenceChild,{key:getChildKey(child),isPresent:!0,presenceAffectsLayout:presenceAffectsLayout,mode:mode},child)}),react.createElement(react.Fragment,null,exitingChildren.size?childrenToRender:childrenToRender.map(child=>(0,react.cloneElement)(child)))};var AuthContext=__webpack_require__(4642);let MonProfil=()=>{let{user,userSubscriptions,handleResubscribe,handleCancelSubscription,errorMessage}=(0,react.useContext)(AuthContext.Vo),formatAmount=amount=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(amount);return user?(0,jsx_runtime.jsxs)("div",{className:"container mx-auto pt-16 p-4",children:[(0,jsx_runtime.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Mon Profil"}),(0,jsx_runtime.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-bold",children:"Nom :"})," ",user.name]}),(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-bold",children:"Email :"})," ",user.email]})]}),errorMessage&&(0,jsx_runtime.jsx)("p",{className:"text-red-500",children:errorMessage}),userSubscriptions.length>0?(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Abonnements"}),(0,jsx_runtime.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:userSubscriptions.map((subscription,index)=>(0,jsx_runtime.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4",children:[(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-bold",children:"Produit :"})," ",subscription.items]}),(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-bold",children:"Statut :"})," ",subscription.status]}),(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-bold",children:"Montant Prochain Paiement :"})," ",formatAmount(subscription.nextPaymentAmount)]}),(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-bold",children:"Date du Prochain Paiement :"})," ",new Date(subscription.nextPaymentDate).toLocaleDateString()]}),"active"===subscription.status?(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>handleCancelSubscription(subscription.subscriptionId),className:"bg-red-500 text-white px-4 py-2 rounded mt-4 hover:bg-red-700",children:"Se d\xe9sabonner"}):(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>handleResubscribe(subscription.subscriptionId),className:"bg-green-500 text-white px-4 py-2 rounded mt-4 hover:bg-green-700",children:"Se r\xe9abonner"})]},index))})]}):(0,jsx_runtime.jsx)("p",{children:"Aucun abonnement trouv\xe9."})]}):(0,jsx_runtime.jsx)("div",{children:"Chargement..."})},menuItems=[{name:"Profil",key:"profil"},{name:"Cr\xe9ation de votre page",key:"creation"}],variants={open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},MonProfilPage=()=>{let[activeSection,setActiveSection]=(0,react.useState)("profil"),renderSection=key=>{switch(key){case"profil":return(0,jsx_runtime.jsx)(MonProfil,{});case"creation":return(0,jsx_runtime.jsx)("div",{});default:return(0,jsx_runtime.jsx)("div",{children:"Section non trouv\xe9e"})}};return(0,jsx_runtime.jsxs)("div",{className:"relative z-10 min-h-screen bg-gradient-to-b from-purple-800 to-purple-500",children:[(0,jsx_runtime.jsx)("div",{className:"flex justify-center space-x-4 p-4",children:menuItems.map(item=>(0,jsx_runtime.jsx)(motion.E.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"cursor-pointer px-4 py-2 rounded-lg bg-purple-700 text-white shadow-lg hover:bg-purple-600 ".concat(activeSection===item.key?"bg-purple-600":""),onClick:()=>setActiveSection(item.key),children:item.name},item.key))}),(0,jsx_runtime.jsx)(AnimatePresence,{children:menuItems.map(item=>activeSection===item.key&&(0,jsx_runtime.jsx)(motion.E.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:variants,transition:{duration:.8},className:"overflow-hidden",children:renderSection(item.key)},item.key))})]})};var pages_mon_profil=MonProfilPage}},function(__webpack_require__){__webpack_require__.O(0,[774,888,179],function(){return __webpack_require__(__webpack_require__.s=6690)}),_N_E=__webpack_require__.O()}]);